# Система онлайн-бронирования билетов в кинотеатр

Курсовая работа по дисциплине "Объектно-ориентированное программирование"

**Автор:** Қабдыбек Ризат  
**Группа:** AIT  
**Университет:** Eurasian Natioanal University  
**Год:** 2024

---

## Описание проекта

Веб-приложение для автоматизации процесса онлайн-бронирования билетов и управления расписанием киносеансов в кинотеатре. Система реализована с использованием современного технологического стека Java (Spring Boot) на backend и React на frontend.

### Основные возможности

**Для пользователей:**
- Просмотр каталога актуальных фильмов с подробной информацией
- Просмотр расписания киносеансов с фильтрацией по дате и времени
- Интерактивная визуализация схемы зала с отображением свободных и занятых мест
- Бронирование билетов с выбором конкретных мест
- Регистрация и аутентификация в системе
- Личный кабинет с историей бронирований
- Управление активными бронированиями

**Для администраторов:**
- Управление каталогом фильмов (добавление, редактирование, удаление)
- Управление расписанием киносеансов
- Управление информацией о кинозалах и конфигурации мест
- Просмотр статистики продаж и загруженности залов
- Управление пользователями системы

---

## Технологический стек

### Backend
- **Java 17** - основной язык программирования
- **Spring Boot 3.x** - фреймворк для создания веб-приложений
- **Spring Data JPA** - работа с базой данных через ORM
- **Spring Security** - аутентификация и авторизация
- **JWT (JSON Web Token)** - механизм аутентификации
- **H2 Database** - встроенная реляционная база данных
- **Maven** - управление зависимостями и сборка проекта
- **Lombok** - генерация boilerplate-кода
- **JUnit 5 + Mockito** - модульное и интеграционное тестирование

### Frontend
- **React 18** - библиотека для построения пользовательского интерфейса
- **React Router** - маршрутизация на клиенте
- **Axios** - HTTP-клиент для взаимодействия с API
- **CSS3** - стилизация интерфейса

### Архитектура
- **REST API** - взаимодействие между frontend и backend
- **Многослойная архитектура** - разделение на уровни Entity-Repository-Service-Controller
- **MVC паттерн** - организация кода на клиенте
- **JWT-based аутентификация** - stateless подход к управлению сессиями

---

## Структура проекта
```
cinema-booking-system/
├── backend/
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/
│   │   │   │   └── kz/cinema/
│   │   │   │       ├── config/          # Конфигурационные классы
│   │   │   │       ├── controller/      # REST контроллеры
│   │   │   │       ├── dto/             # Data Transfer Objects
│   │   │   │       ├── entity/          # JPA сущности
│   │   │   │       ├── exception/       # Обработка исключений
│   │   │   │       ├── repository/      # Репозитории данных
│   │   │   │       ├── security/        # Настройки безопасности
│   │   │   │       └── service/         # Бизнес-логика
│   │   │   └── resources/
│   │   │       ├── application.properties
│   │   │       ├── schema.sql           # Схема БД
│   │   │       └── data.sql             # Начальные данные
│   │   └── test/                        # Тесты
│   └── pom.xml
│
├── frontend/
│   ├── public/
│   ├── src/
│   │   ├── components/                  # React компоненты
│   │   ├── pages/                       # Страницы приложения
│   │   ├── services/                    # API сервисы
│   │   ├── utils/                       # Утилиты
│   │   ├── App.js
│   │   └── index.js
│   └── package.json
│
└── docs/                                # Документация
    ├── diagrams/                        # UML и ER диаграммы
    └── screenshots/                     # Скриншоты интерфейса
```

---

## Установка и запуск

### Требования
- JDK 17 или выше
- Node.js 16 или выше
- Maven 3.6 или выше
- Git

### Клонирование репозитория
```bash
git clone https://github.com/username/cinema-booking-system.git
cd cinema-booking-system
```

### Запуск Backend
```bash
cd backend
mvn clean install
mvn spring-boot:run
```

Backend будет доступен по адресу: `http://localhost:8080`

### Запуск Frontend
```bash
cd frontend
npm install
npm start
```

Frontend будет доступен по адресу: `http://localhost:3000`

---

## Структура базы данных

### Основные таблицы

**users** - Пользователи системы
- id (PRIMARY KEY)
- username (UNIQUE)
- email (UNIQUE)
- password (хешированный)
- created_at

**films** - Каталог фильмов
- id (PRIMARY KEY)
- title
- genre
- duration_minutes
- age_rating
- description
- poster_url

**cinema_halls** - Кинозалы
- id (PRIMARY KEY)
- name
- total_seats
- rows_count

**sessions** - Киносеансы
- id (PRIMARY KEY)
- film_id (FOREIGN KEY)
- hall_id (FOREIGN KEY)
- start_time
- base_price
- status

**bookings** - Бронирования
- id (PRIMARY KEY)
- user_id (FOREIGN KEY)
- session_id (FOREIGN KEY)
- booking_time
- total_amount
- status

**seats** - Места в залах
- id (PRIMARY KEY)
- hall_id (FOREIGN KEY)
- row_number
- seat_number
- seat_type

**booking_seats** - Связь бронирований с местами
- id (PRIMARY KEY)
- booking_id (FOREIGN KEY)
- seat_id (FOREIGN KEY)
- price

---

## API Endpoints

### Аутентификация
- `POST /api/auth/register` - Регистрация нового пользователя
- `POST /api/auth/login` - Вход в систему (получение JWT-токена)

### Фильмы
- `GET /api/films` - Получить список всех фильмов
- `GET /api/films/{id}` - Получить информацию о фильме
- `POST /api/films` - Добавить новый фильм (только для администраторов)
- `PUT /api/films/{id}` - Обновить информацию о фильме (только для администраторов)
- `DELETE /api/films/{id}` - Удалить фильм (только для администраторов)

### Сеансы
- `GET /api/sessions` - Получить расписание сеансов
- `GET /api/sessions/{id}` - Получить информацию о сеансе
- `POST /api/sessions` - Создать новый сеанс (только для администраторов)
- `PUT /api/sessions/{id}` - Обновить сеанс (только для администраторов)
- `DELETE /api/sessions/{id}` - Удалить сеанс (только для администраторов)

### Бронирования
- `POST /api/bookings` - Создать бронирование
- `GET /api/bookings/user/{userId}` - Получить бронирования пользователя
- `GET /api/bookings/{id}` - Получить информацию о бронировании
- `DELETE /api/bookings/{id}` - Отменить бронирование

### Залы и места
- `GET /api/halls` - Получить список залов
- `GET /api/halls/{id}/seats` - Получить схему мест зала
- `GET /api/sessions/{sessionId}/available-seats` - Получить доступные места на сеанс

---

## Принципы ООП в проекте

### Инкапсуляция
Все entity-классы имеют приватные поля с доступом через геттеры и сеттеры. Использование аннотаций Lombok (@Data, @Getter, @Setter) для автоматической генерации методов доступа.

### Наследование
Все сущности наследуют базовый класс `BaseEntity`, содержащий общие поля (id, createdAt, updatedAt). Это обеспечивает единообразие и уменьшает дублирование кода.

### Полиморфизм
Использование интерфейсов JpaRepository для работы с различными сущностями через единый набор методов. Dependency Injection в Spring позволяет работать с различными реализациями сервисов через интерфейсы.

### Абстракция
Repository-слой скрывает детали работы с базой данных от бизнес-логики. Service-слой предоставляет высокоуровневые операции, скрывая детали реализации от контроллеров.

---

## Тестирование

### Запуск тестов
```bash
cd backend
mvn test
```

### Типы тестов

**Модульное тестирование**
- Тестирование сервисов с использованием Mockito для изоляции зависимостей
- Проверка корректности бизнес-логики

**Интеграционное тестирование**
- Тестирование взаимодействия между слоями приложения
- Проверка корректности работы с базой данных

**Функциональное тестирование**
- Ручное тестирование пользовательских сценариев через веб-интерфейс
- Проверка обработки граничных случаев и ошибок

---

## Безопасность

### Реализованные механизмы
- **JWT-аутентификация** - токены с ограниченным временем жизни
- **BCrypt** - шифрование паролей пользователей
- **CORS** - настройка разрешённых источников запросов
- **Валидация данных** - проверка входных данных на уровне DTO
- **Авторизация на основе ролей** - разделение прав доступа для пользователей и администраторов
- **SQL Injection защита** - использование Prepared Statements через JPA

---

## Возможные улучшения

### Функциональные
- Интеграция с платёжными системами для онлайн-оплаты
- Система email-уведомлений о бронированиях
- Программа лояльности и система скидок
- Рекомендации фильмов на основе истории просмотров
- Мобильное приложение с использованием React Native
- Экспорт билетов в PDF формат

### Технические
- Миграция на PostgreSQL или MySQL для production
- Кэширование с использованием Redis
- Добавление Swagger/OpenAPI документации
- Мониторинг и логирование с использованием ELK Stack
- Контейнеризация с использованием Docker
- CI/CD pipeline для автоматического развёртывания

---

## Лицензия

Данный проект разработан в учебных целях в рамках курсовой работы.

---

## Контакты

**Автор:** Қабдыбек Ризат  


